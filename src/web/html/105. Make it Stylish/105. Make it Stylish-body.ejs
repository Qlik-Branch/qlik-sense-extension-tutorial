<div id="section-0"class="section ext-table"><div class="row">
          <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6 body-left">
    <p>Our table is visible and interactive on our dashboard, but it doesn’t exactly look right. In particular, the table header cells seem off. They are inheriting a style that aligns them in the middle of the column, even though our table body contents are aligned left.</p><p>Let’s fix that by applying our own CSS!</p></div><div class="col-xs-6 col-sm-6 col-md-6 col-lg-6 body-right"><div class="graph" id="ext-table"><img src="./imgs/ext-table.png" alt="" class="img-responsive ext-table"></img></div></div></div></div><div id="section-1"class="section files-with-stylesheet"><div class="row">
          <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6 body-left">
    <h3>Creating a Stylesheet</h3><p>To write our CSS, let’s create a completely new file in our extension directory. Label it <em>style.css</em>.</p><p>When we open the file, we can start to add CSS that we want added to the page. However, we need to be careful here. Our CSS could affect other elements on the page, so we want to make sure that it only applies to our extension. In order to do this, we’ll take advantage of CSS’ <em>descendant selectors</em>. <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/Descendant_selectors">Descendant selectors allow us to specify styles for elements that have a specific ancestor.</a> This appears in the format ancestorSelector descendantSelector { /* css */ }.</p></div><div class="col-xs-6 col-sm-6 col-md-6 col-lg-6 body-right"><div class="graph" id="files-with-stylesheet"><img src="./imgs/files-with-stylesheet.png" alt="" class="img-responsive files-with-stylesheet"></img></div></div></div></div><div id="section-2"class="section css-editor"><div class="row">
          <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6 body-left">
    <p>In our case, we want to target all <th> elements that are descendants of our extension container. What should our ancestor selector be for our extension container? In Qlik Sense extensions, all extensions have an ancestor class corresponding with their extension type. This class is written in the format “.qv-object-<EXTENSION NAME>”. In our case, this class would be “.qv-object-my-table”.</p><p>We can use this class as an ancestor when we define our CSS. To add CSS for our <th> elements to get them left-aligned, we can add the following to our stylesheet:</p><p>We have our stylesheet, but it isn’t doing anything yet. Remember that our extension only loads in our .qext file and our my-table.js file. We need to tell Qlik to load this stylesheet so we can use it as well. How to do that? With RequireJS’ module loading.</p></div><div class="col-xs-6 col-sm-6 col-md-6 col-lg-6 body-right"><div class="graph" id="css-editor"></div></div></div></div><div id="section-3"class="section require-js-editor"><div class="row">
          <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6 body-left">
    <h3>Module Loading</h3><p>In Chapter 102, we saw that <a href="http://requirejs.org/">RequireJS</a> is used to load modules into our extension. But as of now, we aren’t using this feature at all. Currently, our extension module is defined with an empty array of dependencies like so:</p></div><div class="col-xs-6 col-sm-6 col-md-6 col-lg-6 body-right"><div class="graph" id="require-js-editor"></div></div></div></div><div id="section-4"class="section require-js-editor-2"><div class="row">
          <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6 body-left">
    <p>RequireJS can load in named modules as well as other JavaScript files via relative paths. For example, Qlik Sense ships with jQuery and it is defined as a named module. If we want to use it, we can load it in like so:</p></div><div class="col-xs-6 col-sm-6 col-md-6 col-lg-6 body-right"><div class="graph" id="require-js-editor-2"></div></div></div></div><div id="section-5"class="section require-js-editor-3"><div class="row">
          <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6 body-left">
    <p>However, it can also handle other file types with plugins. Once such plugin is the text plugin that allows us to load any file type as text. This plugin comes with Qlik Sense and can be used to load our stylesheet using a relative path. To use the plugin, just put text! in front of the relative path for our CSS:</p></div><div class="col-xs-6 col-sm-6 col-md-6 col-lg-6 body-right"><div class="graph" id="require-js-editor-3"></div></div></div></div><div id="section-6"class="section require-js-editor-4"><div class="row">
          <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6 body-left">
    <p>Great! We learned how to use the text plugin AND we loaded a new file that we created. But this text plugin just gave us the contents of our stylesheet file as a string. Now we need to actually add it to the page. Let’s create a new style element, add our cssText to its contents, and put it on the page:</p></div><div class="col-xs-6 col-sm-6 col-md-6 col-lg-6 body-right"><div class="graph" id="require-js-editor-4"></div></div></div></div><div id="section-7"class="section aligned-headers"><div class="row">
          <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6 body-left">
    <p>Our new stylesheet is now being loaded in and added to our page when our extension is created. We now have nicely aligned column headers!</p></div><div class="col-xs-6 col-sm-6 col-md-6 col-lg-6 body-right"><div class="graph" id="aligned-headers"><img src="./imgs/aligned-headers.png" alt="" class="img-responsive aligned-headers"></img></div></div></div></div><div id="section-8"class="section "><div class="row">
          <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6 body-left">
    <h3>Keep it Modular</h3><p>In the process of learning about using a stylesheet, we learned how to load in external files for our extension. We can use this concept to modularize our code, allowing us to separate components into different files to make the code easier to maintain over time. Let’s examine how we can modularize our JavaScript and clean up our extension code.</p><p>In our <em>my-table.js</em> file, we have lots of long JavaScript defining different parts of our extension, such as our paint function and our initialProperties JSON. We can move all of these code pieces into their own files so it is easier for us to manage. Let’s try it out with our initialProperties JSON:</p></div><div class="col-xs-6 col-sm-6 col-md-6 col-lg-6 body-right"><div class="graph"></div></div></div></div><div id="section-9"class="section initial-properties"><div class="row">
          <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6 body-left">
    <ol><li><p>Create a new file in the <em>my-table</em> directory called <em>initialProperties.js</em></p></li></ol></div><div class="col-xs-6 col-sm-6 col-md-6 col-lg-6 body-right"><div class="graph" id="initial-properties"><img src="./imgs/initial-properties.png" alt="" class="img-responsive initial-properties"></img></div></div></div></div><div id="section-10"class="section initial-properties-editor"><div class="row">
          <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6 body-left">
    <ol start="2"><li><p>Define a module with no dependencies like so:</p></li></ol></div><div class="col-xs-6 col-sm-6 col-md-6 col-lg-6 body-right"><div class="graph" id="initial-properties-editor"></div></div></div></div><div id="section-11"class="section initial-properties-editor-2"><div class="row">
          <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6 body-left">
    <ol start="3"><li><p>Return an object representing our initialProperties, copied from our <em>my-table.js</em> file</p></li></ol></div><div class="col-xs-6 col-sm-6 col-md-6 col-lg-6 body-right"><div class="graph" id="initial-properties-editor-2"></div></div></div></div><div id="section-12"class="section javascript-editor"><div class="row">
          <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6 body-left">
    <ol start="4"><li><p>Load the newly created module into the <em>my-table.js</em> file and map it to a variable in the module function</p></li></ol></div><div class="col-xs-6 col-sm-6 col-md-6 col-lg-6 body-right"><div class="graph" id="javascript-editor"></div></div></div></div><div id="section-13"class="section "><div class="row">
          <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6 body-left">
    <ol start="5"><li><p>Remove the old declaration of myProps from the <em>my-table.js</em> file, since the value is now fed from the dependency injection at the top <strong>screenshot of strikethrough code</strong></p></li></ol><p>Now we have our initialProperties stored in an external file! From now on, we can edit that file whenever we want to change the initial properties. Go ahead and repeat the steps above for the other variables like so:</p><ul><li><p>place the myDefinition variable into a file called definition.js</p></li><li><p>place the myPaint variable into a file called paint.js</p></li><li><p>place the support variable into a file called support.js</p></li></ul></div><div class="col-xs-6 col-sm-6 col-md-6 col-lg-6 body-right"><div class="graph"></div></div></div></div><div id="section-14"class="section javascript-editor-2"><div class="row">
          <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6 body-left">
    <p>Our final code in <em>my-table.js</em> should now look clean like this:</p></div><div class="col-xs-6 col-sm-6 col-md-6 col-lg-6 body-right"><div class="graph" id="javascript-editor-2"></div></div></div></div><div id="section-15"class="section "><div class="row">
          <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6 body-left">
    <h3>Adding Custom Property Panel Items</h3><p><a href="http://help.qlik.com/en-US/sense-developer/3.2/Subsystems/Extensions/Content/Overview/visualization-properties.htm">Our extension’s property panel gives users the ability to configure our extension to their needs.</a> With this functionality, we can deliver dynamic extensions that provide a more flexible and feature-rich experience for our users. So far, we’ve leveraged Qlik Sense’ pre-defined components to quickly add dimension and measure configuration to our properties panel. However, Qlik Sense also supports custom property definitions that we can use to expand what our extension can do. Let’s explore.</p><p><strong>Properties Panel Definition Structure</strong>As we’ve seen so far, our properties panel definition is stored as a JSON object. Each property of that object can use what are called “property templates” to render a property in the panel in different ways. Typically, these properties connect back to the Generic Object properties so that we can use the panel to change our Generic Object.</p><p>Qlik Sense has many different types of property templates that we can use. <a href="http://help.qlik.com/en-US/sense-developer/3.2/Subsystems/Extensions/Content/Howtos/working-with-custom-properties.htm">For example, there are types for string inputs, numeric inputs, check boxes, drop downs, and sliders.</a>We can even create groups of types using a special type called “items”. Groups of types are useful for organizing our properties panel into a hierarchy that users can easily navigate.</p></div><div class="col-xs-6 col-sm-6 col-md-6 col-lg-6 body-right"><div class="graph"></div></div></div></div><div id="section-16"class="section properties-editor"><div class="row">
          <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6 body-left">
    <p>Let’s put these concepts into action by adding a property for the text color in our table. We will use a string property so that users can enter their own color code into the extension.</p><p>Let’s start by accessing the items that are a part of the “settings” component we are already using for the Appearance section of our panel. Make the following change to the settings property in <em>definition.js</em>:</p></div><div class="col-xs-6 col-sm-6 col-md-6 col-lg-6 body-right"><div class="graph" id="properties-editor"></div></div></div></div><div id="section-17"class="section properties-editor-2"><div class="row">
          <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6 body-left">
    <p>As mentioned previously, groups of properties are organized using items in the properties panel. Our settings contains groups of items, so we can add on to that. Let’s add an additional property for our text color:</p></div><div class="col-xs-6 col-sm-6 col-md-6 col-lg-6 body-right"><div class="graph" id="properties-editor-2"></div></div></div></div><div id="section-18"class="section properties-editor-3"><div class="row">
          <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6 body-left">
    <p>Now we have a property for text color, but we haven’t given it a definition. Using the custom properties documentation online <link>, we can define any number of types of inputs. For this use case, we will use the custom string property. Following the documentation, we can define like so:</p></div><div class="col-xs-6 col-sm-6 col-md-6 col-lg-6 body-right"><div class="graph" id="properties-editor-3"></div></div></div></div><div id="section-19"class="section properties-editor-4"><div class="row">
          <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6 body-left">
    <p>A key part of the code above is the ref property. The ref property provides a reference to where the property should exist on our Generic Object. This will allow us to access it on the resulting layout in our paint code. Here, we set the property reference to textColor, which is a property on our Generic Object. Now we can modify our paint code to use this color. We can add a style to the table to use the text color:</p><p>With this panel definition in place, we can now change that value on the fly from the extension’s properties panel.</p><p>Go ahead and try it out! Enter any valid HTML color string, like “red”, “#4286f4”,  or “rgb(244, 65, 241)” to see the table colors update.</p></div><div class="col-xs-6 col-sm-6 col-md-6 col-lg-6 body-right"><div class="graph" id="properties-editor-4"></div></div></div></div><div id="section-20"class="section "><div class="row">
          <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6 body-left">
    <h2>Fin</h2><h4>Recap</h4><ul><li><p>Stylesheets can be used to adjust the look and feel of our extensions</p></li><li><p>We can break our code out into different files defined as “modules” to make the code easier to maintain.</p></li><li><p>We can add our own custom properties to the extension properties panel to enable users to configure specific attributes of our extension.</p></li></ul><h4>Resources</h4><ul><li><p><a href="http://requirejs.org/">RequireJS for module loading</a></p></li><li><p><a href="http://help.qlik.com/en-US/sense-developer/3.2/Subsystems/Extensions/Content/Overview/visualization-properties.htm">Properties Panel Documentation</a></p></li></ul><h4>Troubleshooting Guide</h4><ul><li></li></ul></div><div class="col-xs-6 col-sm-6 col-md-6 col-lg-6 body-right"><div class="graph"></div></div></div></div>